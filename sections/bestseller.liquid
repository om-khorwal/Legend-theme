{{ 'bestseller.css' | asset_url | stylesheet_tag }}

<div
  class="product-tabs"
  style="font-family: {{ section.settings.font_family }}, sans-serif; color: {{ section.settings.text_color }}"
>
  <div class="tabs">
    <button class="tab-button active" onclick="switchTab('bestsellers')">Bestsellers</button>
    <button class="tab-button" onclick="switchTab('new-arrivals')">New Arrivals</button>
  </div>

  <div id="bestsellers" class="tab-content active">
    {% for block in section.blocks %}
      {% if block.type == 'bestseller' %}
        <div class="product-card">
          <div class="image-carousel">
            {% for i in (1..6) %}
              {% assign image_key = 'image_' | append: i %}
              {% assign img = block.settings[image_key] %}
              {% if img %}
                <img src="{{ img | image_url: width: 300 }}" alt="Product Image {{ i }}" width="300" height="300">
              {% endif %}
            {% endfor %}
          </div>
          <h4 style="font-family: {{ section.settings.title_font.family }}; color: {{ section.settings.title_color }}">
            {{ block.settings.title }}
          </h4>
          <p
            class="price"
            style="font-family: {{ section.settings.price_font }}; color: {{ section.settings.price_color }}"
          >
            {{ block.settings.price }}
          </p>
          <p
            class="variant"
            style="font-family: {{ section.settings.variant_font }}; color: {{ section.settings.variant_color }}"
          >
            {% assign variants = block.settings.variant | split: ',' %}
            {% for item in variants %}
              <span>{{ item | strip }}</span>
              {%- unless forloop.last %}, {% endunless %}
            {% endfor %}
          </p>
          <button
            class="add-to-cart"
            style="font-family: {{ section.settings.button_font }}; background-color: {{ section.settings.button_bg }}; color: {{ section.settings.button_color }}"
          >
            {{ block.settings.button_text }}
          </button>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <div id="new-arrivals" class="tab-content">
    {% for block in section.blocks %}
      {% if block.type == 'newarrival' %}
        <div class="product-card">
          <div class="image-carousel">
            {% for i in (1..6) %}
              {% assign image_key = 'image_' | append: i %}
              {% assign img = block.settings[image_key] %}
              {% if img %}
                <img src="{{ img | image_url: width: 300 }}" alt="Product Image {{ i }}" width="300" height="300">
              {% endif %}
            {% endfor %}
          </div>
          <h4 style="font-family: {{ section.settings.title_font.family }}; color: {{ section.settings.title_color }}">
            {{ block.settings.title }}
          </h4>
          <p
            class="price"
            style="font-family: {{ section.settings.price_font }}; color: {{ section.settings.price_color }}"
          >
            {{ block.settings.price }}
          </p>
          <p
            class="variant"
            style="font-family: {{ section.settings.variant_font }}; color: {{ section.settings.variant_color }}"
          >
            {% assign variants = block.settings.variant | split: ',' %}
            {% for item in variants %}
              <span>{{ item | strip }}</span>
              {%- unless forloop.last %}, {% endunless %}
            {% endfor %}
          </p>
          <button
            class="add-to-cart"
            style="font-family: {{ section.settings.button_font }}; background-color: {{ section.settings.button_bg }}; color: {{ section.settings.button_color }}"
          >
            {{ block.settings.button_text }}
          </button>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<script>
  function switchTab(id) {
    document.querySelectorAll('.tab-button').forEach((btn) => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach((tab) => tab.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
  }
</script>

{% schema %}
{
  "name": "Product Tabs",
  "settings": [
    {
      "type": "font_picker",
      "id": "font_family",
      "label": "Font Family",
      "default": "helvetica_n4"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "font_picker",
      "id": "title_font",
      "label": "Title Font",
      "default": "helvetica_n4"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#000000"
    },
    {
      "type": "font_picker",
      "id": "price_font",
      "label": "Price Font",
      "default": "helvetica_n4"
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Price Color",
      "default": "#000000"
    },
    {
      "type": "font_picker",
      "id": "variant_font",
      "label": "Variant Font",
      "default": "helvetica_n4"
    },
    {
      "type": "color",
      "id": "variant_color",
      "label": "Variant Color",
      "default": "#000000"
    },
    {
      "type": "font_picker",
      "id": "button_font",
      "label": "Button Font",
      "default": "helvetica_n4"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_bg",
      "label": "Button Background",
      "default": "#000000"
    }
  ],
  "max_blocks": 16,
  "blocks": [
    {
      "type": "bestseller",
      "name": "Bestseller Product",
      "settings": [
        { "type": "text", "id": "title", "label": "Product Title" },
        { "type": "text", "id": "price", "label": "Product Price" },
        { "type": "text", "id": "variant", "label": "Product Variant" },
        { "type": "text", "id": "button_text", "label": "Button Text", "default": "Add to Cart" },
        { "type": "image_picker", "id": "image_1", "label": "Image 1" },
        { "type": "image_picker", "id": "image_2", "label": "Image 2" },
        { "type": "image_picker", "id": "image_3", "label": "Image 3" },
        { "type": "image_picker", "id": "image_4", "label": "Image 4" },
        { "type": "image_picker", "id": "image_5", "label": "Image 5" },
        { "type": "image_picker", "id": "image_6", "label": "Image 6" }
      ]
    },
    {
      "type": "newarrival",
      "name": "New Arrival Product",
      "settings": [
        { "type": "text", "id": "title", "label": "Product Title" },
        { "type": "text", "id": "price", "label": "Product Price" },
        { "type": "text", "id": "variant", "label": "Product Variant" },
        { "type": "text", "id": "button_text", "label": "Button Text", "default": "Add to Cart" },
        { "type": "image_picker", "id": "image_1", "label": "Image 1" },
        { "type": "image_picker", "id": "image_2", "label": "Image 2" },
        { "type": "image_picker", "id": "image_3", "label": "Image 3" },
        { "type": "image_picker", "id": "image_4", "label": "Image 4" },
        { "type": "image_picker", "id": "image_5", "label": "Image 5" },
        { "type": "image_picker", "id": "image_6", "label": "Image 6" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Tabs"
    }
  ]
}
{% endschema %}
